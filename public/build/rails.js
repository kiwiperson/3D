jQuery(function($){var csrf_token=$("meta[name=csrf-token]").attr("content"),csrf_param=$("meta[name=csrf-param]").attr("content");$.fn.extend({triggerAndReturn:function(e,t){var n=new $.Event(e);return this.trigger(n,t),n.result!==!1},callRemote:function(){var el=this,method=el.attr("method")||el.attr("data-method")||"GET",url=el.attr("action")||el.attr("href"),dataType=el.attr("data-type")||"script";el.attr("data-jsonp")&&(dataType="text");if(el.attr("stop-propagate")){el.attr("stop-propagate",null);return}if(url===undefined)throw"No URL specified for remote call (action or href must be present).";if(el.triggerAndReturn("ajax:before")){var data=el.is("form")?el.serializeArray():[],found=!1;for(var i=data.length-1;i>=0;i-=1)data[i].name===csrf_param&&(found=!0);found||data.push({name:csrf_param,value:csrf_token}),$.ajax({url:url,data:data,dataType:dataType,type:method.toUpperCase(),beforeSend:function(e){el.trigger("ajax:loading",e)},success:function(data,status,xhr){el.attr("data-jsonp")&&eval(el.attr("data-jsonp")+"("+data+")"),el.trigger("ajax:success",[data,status,xhr])},complete:function(e){el.trigger("ajax:complete",e)},error:function(e,t,n){el.trigger("ajax:failure",[e,t,n])}})}el.trigger("ajax:after")}}),$("a[data-confirm],input[data-confirm]").live("click",function(e){var t=$(this);if(t.triggerAndReturn("confirm")&&!confirm(t.attr("data-confirm")))return t.attr("stop-propagate",!0),!1}),$("form[data-remote]").live("submit",function(e){$(this).callRemote(),e.preventDefault()}),$("a[data-remote],input[data-remote]").live("click",function(e){$(this).callRemote(),e.preventDefault()}),$("a[data-method]:not([data-remote])").live("click",function(e){var t=$(this),n=t.attr("href"),r=t.attr("data-method"),i=$('<form method="post" action="'+n+'"></form>'),s='<input name="_method" value="'+r+'" type="hidden" />';csrf_param!=null&&csrf_token!=null&&(s+='<input name="'+csrf_param+'" value="'+csrf_token+'" type="hidden" />'),i.hide().append(s).appendTo("body"),e.preventDefault(),i.submit()});var disable_with_input_selector="input[data-disable-with]",disable_with_form_remote_selector="form[data-remote]:has("+disable_with_input_selector+")",disable_with_form_not_remote_selector="form:not([data-remote]):has("+disable_with_input_selector+")",disable_with_input_function=function(){$(this).find(disable_with_input_selector).each(function(){var e=$(this);e.data("enable-with",e.val()).attr("value",e.attr("data-disable-with")).attr("disabled","disabled")})};$(disable_with_form_remote_selector).live("ajax:before",disable_with_input_function),$(disable_with_form_not_remote_selector).live("submit",disable_with_input_function),$(disable_with_form_remote_selector).live("ajax:complete",function(){$(this).find(disable_with_input_selector).each(function(){var e=$(this);e.removeAttr("disabled").val(e.data("enable-with"))})})});