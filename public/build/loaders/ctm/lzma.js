var LZMA=LZMA||{};LZMA.OutWindow=function(){this._windowSize=0},LZMA.OutWindow.prototype.create=function(e){if(!this._buffer||this._windowSize!==e)this._buffer=[];this._windowSize=e,this._pos=0,this._streamPos=0},LZMA.OutWindow.prototype.flush=function(){var e=this._pos-this._streamPos;if(e!==0){while(e--)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},LZMA.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},LZMA.OutWindow.prototype.setStream=function(e){this.releaseStream(),this._stream=e},LZMA.OutWindow.prototype.init=function(e){e||(this._streamPos=0,this._pos=0)},LZMA.OutWindow.prototype.copyBlock=function(e,t){var n=this._pos-e-1;n<0&&(n+=this._windowSize);while(t--)n>=this._windowSize&&(n=0),this._buffer[this._pos++]=this._buffer[n++],this._pos>=this._windowSize&&this.flush()},LZMA.OutWindow.prototype.putByte=function(e){this._buffer[this._pos++]=e,this._pos>=this._windowSize&&this.flush()},LZMA.OutWindow.prototype.getByte=function(e){var t=this._pos-e-1;return t<0&&(t+=this._windowSize),this._buffer[t]},LZMA.RangeDecoder=function(){},LZMA.RangeDecoder.prototype.setStream=function(e){this._stream=e},LZMA.RangeDecoder.prototype.releaseStream=function(){this._stream=null},LZMA.RangeDecoder.prototype.init=function(){var e=5;this._code=0,this._range=-1;while(e--)this._code=this._code<<8|this._stream.readByte()},LZMA.RangeDecoder.prototype.decodeDirectBits=function(e){var t=0,n=e,r;while(n--)this._range>>>=1,r=this._code-this._range>>>31,this._code-=this._range&r-1,t=t<<1|1-r,(this._range&4278190080)===0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return t},LZMA.RangeDecoder.prototype.decodeBit=function(e,t){var n=e[t],r=(this._range>>>11)*n;return(this._code^2147483648)<(r^2147483648)?(this._range=r,e[t]+=2048-n>>>5,(this._range&4278190080)===0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=r,this._code-=r,e[t]-=n>>>5,(this._range&4278190080)===0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},LZMA.initBitModels=function(e,t){while(t--)e[t]=1024},LZMA.BitTreeDecoder=function(e){this._models=[],this._numBitLevels=e},LZMA.BitTreeDecoder.prototype.init=function(){LZMA.initBitModels(this._models,1<<this._numBitLevels)},LZMA.BitTreeDecoder.prototype.decode=function(e){var t=1,n=this._numBitLevels;while(n--)t=t<<1|e.decodeBit(this._models,t);return t-(1<<this._numBitLevels)},LZMA.BitTreeDecoder.prototype.reverseDecode=function(e){var t=1,n=0,r=0,i;for(;r<this._numBitLevels;++r)i=e.decodeBit(this._models,t),t=t<<1|i,n|=i<<r;return n},LZMA.reverseDecode2=function(e,t,n,r){var i=1,s=0,o=0,u;for(;o<r;++o)u=n.decodeBit(e,t+i),i=i<<1|u,s|=u<<o;return s},LZMA.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new LZMA.BitTreeDecoder(8),this._numPosStates=0},LZMA.LenDecoder.prototype.create=function(e){for(;this._numPosStates<e;++this._numPosStates)this._lowCoder[this._numPosStates]=new LZMA.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new LZMA.BitTreeDecoder(3)},LZMA.LenDecoder.prototype.init=function(){var e=this._numPosStates;LZMA.initBitModels(this._choice,2);while(e--)this._lowCoder[e].init(),this._midCoder[e].init();this._highCoder.init()},LZMA.LenDecoder.prototype.decode=function(e,t){return e.decodeBit(this._choice,0)===0?this._lowCoder[t].decode(e):e.decodeBit(this._choice,1)===0?8+this._midCoder[t].decode(e):16+this._highCoder.decode(e)},LZMA.Decoder2=function(){this._decoders=[]},LZMA.Decoder2.prototype.init=function(){LZMA.initBitModels(this._decoders,768)},LZMA.Decoder2.prototype.decodeNormal=function(e){var t=1;do t=t<<1|e.decodeBit(this._decoders,t);while(t<256);return t&255},LZMA.Decoder2.prototype.decodeWithMatchByte=function(e,t){var n=1,r,i;do{r=t>>7&1,t<<=1,i=e.decodeBit(this._decoders,(1+r<<8)+n),n=n<<1|i;if(r!==i){while(n<256)n=n<<1|e.decodeBit(this._decoders,n);break}}while(n<256);return n&255},LZMA.LiteralDecoder=function(){},LZMA.LiteralDecoder.prototype.create=function(e,t){var n;if(this._coders&&this._numPrevBits===t&&this._numPosBits===e)return;this._numPosBits=e,this._posMask=(1<<e)-1,this._numPrevBits=t,this._coders=[],n=1<<this._numPrevBits+this._numPosBits;while(n--)this._coders[n]=new LZMA.Decoder2},LZMA.LiteralDecoder.prototype.init=function(){var e=1<<this._numPrevBits+this._numPosBits;while(e--)this._coders[e].init()},LZMA.LiteralDecoder.prototype.getDecoder=function(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+((t&255)>>>8-this._numPrevBits)]},LZMA.Decoder=function(){this._outWindow=new LZMA.OutWindow,this._rangeDecoder=new LZMA.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new LZMA.BitTreeDecoder(4),this._lenDecoder=new LZMA.LenDecoder,this._repLenDecoder=new LZMA.LenDecoder,this._literalDecoder=new LZMA.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new LZMA.BitTreeDecoder(6),this._posSlotDecoder[1]=new LZMA.BitTreeDecoder(6),this._posSlotDecoder[2]=new LZMA.BitTreeDecoder(6),this._posSlotDecoder[3]=new LZMA.BitTreeDecoder(6)},LZMA.Decoder.prototype.setDictionarySize=function(e){return e<0?!1:(this._dictionarySize!==e&&(this._dictionarySize=e,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},LZMA.Decoder.prototype.setLcLpPb=function(e,t,n){var r=1<<n;return e>8||t>4||n>4?!1:(this._literalDecoder.create(t,e),this._lenDecoder.create(r),this._repLenDecoder.create(r),this._posStateMask=r-1,!0)},LZMA.Decoder.prototype.init=function(){var e=4;this._outWindow.init(!1),LZMA.initBitModels(this._isMatchDecoders,192),LZMA.initBitModels(this._isRep0LongDecoders,192),LZMA.initBitModels(this._isRepDecoders,12),LZMA.initBitModels(this._isRepG0Decoders,12),LZMA.initBitModels(this._isRepG1Decoders,12),LZMA.initBitModels(this._isRepG2Decoders,12),LZMA.initBitModels(this._posDecoders,114),this._literalDecoder.init();while(e--)this._posSlotDecoder[e].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},LZMA.Decoder.prototype.decode=function(e,t,n){var r=0,i=0,s=0,o=0,u=0,a=0,f=0,l,c,h,p,d,v;this._rangeDecoder.setStream(e),this._outWindow.setStream(t),this.init();while(n<0||a<n){l=a&this._posStateMask;if(this._rangeDecoder.decodeBit(this._isMatchDecoders,(r<<4)+l)===0)c=this._literalDecoder.getDecoder(a++,f),r>=7?f=c.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(i)):f=c.decodeNormal(this._rangeDecoder),this._outWindow.putByte(f),r=r<4?0:r-(r<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,r)===1)h=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,r)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(r<<4)+l)===0&&(r=r<7?9:11,h=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,r)===0?p=s:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,r)===0?p=o:(p=u,u=o),o=s),s=i,i=p),h===0&&(h=2+this._repLenDecoder.decode(this._rangeDecoder,l),r=r<7?8:11);else{u=o,o=s,s=i,h=2+this._lenDecoder.decode(this._rangeDecoder,l),r=r<7?7:10,d=this._posSlotDecoder[h<=5?h-2:3].decode(this._rangeDecoder);if(d>=4){v=(d>>1)-1,i=(2|d&1)<<v;if(d<14)i+=LZMA.reverseDecode2(this._posDecoders,i-d-1,this._rangeDecoder,v);else{i+=this._rangeDecoder.decodeDirectBits(v-4)<<4,i+=this._posAlignDecoder.reverseDecode(this._rangeDecoder);if(i<0){if(i===-1)break;return!1}}}else i=d}if(i>=a||i>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(i,h),a+=h,f=this._outWindow.getByte(0)}}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},LZMA.Decoder.prototype.setDecoderProperties=function(e){var t,n,r,i,s;return e.size<5?!1:(t=e.readByte(),n=t%9,t=~~(t/9),r=t%5,i=~~(t/5),this.setLcLpPb(n,r,i)?(s=e.readByte(),s|=e.readByte()<<8,s|=e.readByte()<<16,s+=e.readByte()*16777216,this.setDictionarySize(s)):!1)},LZMA.decompress=function(e,t,n,r){var i=new LZMA.Decoder;if(!i.setDecoderProperties(e))throw"Incorrect stream properties";if(!i.decode(t,n,r))throw"Error in data stream";return!0};